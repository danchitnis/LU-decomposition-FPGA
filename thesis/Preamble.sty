\ProvidesPackage{Preamble}

\usepackage[utf8]{inputenc}      % standard
\usepackage[style=english]{csquotes}            % suppress babel warning
\usepackage[UKenglish]{babel}    % standard for english support
\usepackage[UKenglish]{isodate}  % For a proper date format
\cleanlookdateon                 % Remove ordinal day reference
\usepackage[T1]{fontenc}         % font encoding
\usepackage{graphicx,subcaption,wrapfig,float}           % for including prebuilt graphics
%\usepackage[final]{listingsutf8} % for code listings
\usepackage{ifdraft}             % differentiate more easily b/w draft and final
\usepackage{setspace}            % for onehalfspacing (part of uni spec)
\usepackage{amsmath}             % better math environment
\usepackage{siunitx}
\usepackage{enumitem}
\usepackage{appendix}

\usepackage{caption}           % for adjusting the caption spacing
% Adjust caption spacing for figures & tables because they will be below the
% content
\captionsetup{belowskip=12pt,aboveskip=0pt}
\captionsetup{singlelinecheck=false}
\captionsetup{labelfont=bf}

\usepackage{geometry}
\geometry{left=2.54cm,right=2.54cm,top=3.18cm,bottom=3.18cm}
\setlength{\headheight}{14pt}

% Move the page number to the top right (odd) / left (even)
\usepackage{fancyhdr}            % uni spec header/footer
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\makeatletter
\let\ps@plain\ps@fancy
\makeatother
% \fancyhead[LE,RO]{\thepage}
\rhead{\thepage}
\pagestyle{fancy}

\usepackage[svgnames]{xcolor}
% \usepackage{tikz}

\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=cyan,
    citecolor=green,
    pdfauthor={Yichen Zhang},
    pdftitle={BEng Thesis},
    pdfsubject={Acceleration},
}

\usepackage[atend]{bookmark}
\bookmarksetup{
    numbered,
    addtohook={\ifnum\bookmarkget{level}>2  % Numbered bookmark level
               \DisableBookmarkNumbering\fi},
}
\makeatletter
\newcommand*{\DisableBookmarkNumbering}{
    \let\numberline\@gobble
    % The followings are not needed for subsections and below
    % \let\booknumberline\@gobble
    % \let\partnumberline\@gobble
    % \let\chapternumberline\@gobble
}
\renewcommand{\Hy@numberline}[1]{#1. } %add dots
\makeatother

\usepackage{tocbibind}  % Add toc to toc
\usepackage[titles]{tocloft}               % For table of contents formatting
%% Table of contents formatting
\renewcommand{\cftchapdotsep}{\cftdotsep}   % Give chapters dots too
\setlength\cftbeforechapskip{5pt}   % for spacing after each entry
% \setlength\cftbeforefigskip{\cftbeforechapskip}
% \setlength\cftbeforetabskip{\cftbeforechapskip}

\usepackage [ style=ieee,
              url=false
              % backend=biber,
              % style=numeric,
              % sorting=none,
              % date=long,
              % urldate=long,
              % minbibnames=3,
              % maxbibnames=6,
              % firstinits=true
            ] {biblatex}         % bibliography support
\addbibresource{Ref/Ref.bib}            % the bib file

\usepackage{listings}
\lstdefinestyle{mystyle}{
    backgroundcolor=\color[rgb]{0.95,0.95,0.92},
    commentstyle=\color[rgb]{0,0.6,0},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color[rgb]{0.5,0.5,0.5},
    stringstyle=\color[rgb]{0.58,0,0.82},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2
}
\lstset{style=mystyle}


\setlength{\bibhang}{0pt}
\allowdisplaybreaks[3]  % 跨页公式

% 连字符
% \tolerance=1
% \emergencystretch=\maxdimen
% \hyphenpenalty=10000
% \hbadness=10000

%\usepackage{microtype}           % pdf microtype improvements

% Set up a few extra font families for teletype rendering.
\DeclareFontFamily{T1}{lmtt}{}
\DeclareFontShape{T1}{lmtt}{m}{n}{<-> ec-lmtl10}{}
\DeclareFontShape{T1}{lmtt}{m}{\itdefault}{<-> ec-lmtlo10}{}
\DeclareFontShape{T1}{lmtt}{\bfdefault}{n}{<-> ec-lmtk10}{}
\DeclareFontShape{T1}{lmtt}{\bfdefault}{\itdefault}{<-> ec-lmtko10}{}


% Put the ``BigCorp Confidential'' string in the footer
% Remove if not doing a company Confidential project
% If the draft document option is set, put a big notice instead
%\ifdraft{\cfoot{DRAFT}}{\cfoot{
 %   \textsc{BigCorp}\textsuperscript{\textregistered} \textsc{Confidential}}}


\usepackage[toc,nonumberlist]{glossaries}     % glossary support
\newcommand*{\glscode}{\texttt}
\newglossary[nml]{nom}{nmn}{ncl}{List of Symbols}
\makeglossaries             % create the glossary (this must be in the preamble)
\renewcommand*\glscode{\textbf}
\newcommand*\code{\texttt}
% Glossary style for the list of symbols.
\newlength{\acronymlabelwidth}
\setlength{\acronymlabelwidth}{0.25\textwidth}
\newglossarystyle{listwithwidth}{%
  \renewenvironment{theglossary}%
    {\begin{description}}{\end{description}}%
  \renewcommand*{\glossaryheader}{}%
  \renewcommand*{\glsgroupheading}[1]{}%
  \renewcommand*{\glossaryentryfield}[5]{%
    \item[\parbox{\acronymlabelwidth}{\glsentryitem{##1}\glstarget{##1}{##2}}]
       ##3\glspostdescription\space}%
  \renewcommand*{\glossarysubentryfield}[6]{%
    \glssubentryitem{##2}%
    \glstarget{##2}{\strut}##4\glspostdescription\space ##6.}%
  \renewcommand*{\glsgroupskip}{\indexspace}%
}
